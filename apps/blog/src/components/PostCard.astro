---
// PostCard Component
// Displays a blog post card in listings
interface Props {
	title: string;
	slug: string;
	summary?: string;
	readingTime?: number;
	wordCount?: number;
	tags?: string[];
	showDate?: boolean;
	publishedAt?: Date;
}

const {
	title,
	slug,
	summary = "",
	readingTime,
	wordCount,
	tags = [],
	showDate = false,
	publishedAt,
} = Astro.props;

const _postUrl = `/writing/${slug}`;
---

<article class="card bg-base-100 shadow-sm hover:shadow-md transition-shadow duration-300">
	<div class="card-body">
		<h3 class="card-title text-display">
			<a href={postUrl} class="hover:text-primary transition-colors">
				{title}
			</a>
		</h3>

		{
			summary && (
				<p class="text-body opacity-80 line-clamp-3">
					{summary}
				</p>
			)
		}

		<div class="card-actions justify-between items-center mt-4">
			<div class="flex gap-4 text-sm opacity-70">
				{readingTime && <span>{readingTime} min read</span>}
				{wordCount && <span>{wordCount.toLocaleString()} words</span>}
				{
					showDate && publishedAt && (
						<span>{publishedAt.toLocaleDateString("en-US", { year: "numeric", month: "short", day: "numeric" })}</span>
					)
				}
			</div>

			{
				tags.length > 0 && (
					<div class="flex gap-2 flex-wrap">
						{tags.slice(0, 3).map((tag) => (
							<span class="badge badge-sm badge-ghost">{tag}</span>
						))}
					</div>
				)
			}
		</div>
	</div>
</article>

<style>
	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
</style>
