---
// AuthorByline Component
// Displays author information on blog posts
interface Props {
	author: {
		name: string;
		bio?: string;
		credentials?: string;
		profilePicture?: string;
		website?: string;
	};
	publishedAt?: Date;
	modifiedAt?: Date;
	showBio?: boolean;
}

const { author, publishedAt, modifiedAt, showBio = false } = Astro.props;

const formatDate = (date: Date) => {
	return date.toLocaleDateString("en-US", {
		year: "numeric",
		month: "long",
		day: "numeric",
	});
};
---

<div class="author-byline flex items-start gap-4 p-4 bg-base-200 rounded-lg">
	{
		author.profilePicture && (
			<div class="avatar">
				<div class="w-16 h-16 rounded-full">
					<img src={author.profilePicture} alt={author.name} />
				</div>
			</div>
		)
	}

	<div class="flex-1">
		<div class="flex items-center gap-2 mb-1">
			<h4 class="text-display font-semibold text-lg">
				{
					author.website ? (
						<a href={author.website} class="hover:text-primary transition-colors">
							{author.name}
						</a>
					) : (
						<span>{author.name}</span>
					)
				}
			</h4>
			{author.credentials && <span class="text-sm opacity-70">{author.credentials}</span>}
		</div>

		{
			(publishedAt || modifiedAt) && (
				<div class="text-sm opacity-70 mb-2">
					{publishedAt && <span>Published {formatDate(publishedAt)}</span>}
					{modifiedAt && publishedAt && modifiedAt.getTime() !== publishedAt.getTime() && (
						<span> â€¢ Updated {formatDate(modifiedAt)}</span>
					)}
				</div>
			)
		}

		{showBio && author.bio && <p class="text-sm opacity-80 mt-2">{author.bio}</p>}
	</div>
</div>
